{"ast":null,"code":"export async function callGemini(apiKey, prompt, systemPrompt = \"You are an expert ABB Drives application engineer.\") {\n  const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;\n  const payload = {\n    contents: [{\n      parts: [{\n        text: prompt\n      }]\n    }],\n    systemInstruction: {\n      parts: [{\n        text: systemPrompt\n      }]\n    }\n  };\n  const delays = [1000, 2000, 4000, 8000, 16000];\n  for (let i = 0; i < delays.length; i++) {\n    try {\n      var _data$candidates, _data$candidates$, _data$candidates$$con, _data$candidates$$con2, _data$candidates$$con3;\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      if (!response.ok) {\n        if (response.status === 429) throw new Error(\"Too Many Requests\");\n        const errText = await response.text();\n        throw new Error(`API Error: ${response.status} - ${errText}`);\n      }\n      const data = await response.json();\n      return ((_data$candidates = data.candidates) === null || _data$candidates === void 0 ? void 0 : (_data$candidates$ = _data$candidates[0]) === null || _data$candidates$ === void 0 ? void 0 : (_data$candidates$$con = _data$candidates$.content) === null || _data$candidates$$con === void 0 ? void 0 : (_data$candidates$$con2 = _data$candidates$$con.parts) === null || _data$candidates$$con2 === void 0 ? void 0 : (_data$candidates$$con3 = _data$candidates$$con2[0]) === null || _data$candidates$$con3 === void 0 ? void 0 : _data$candidates$$con3.text) || \"No analysis available.\";\n    } catch (error) {\n      if (i === delays.length - 1) return `Error: ${error.message}. Please try again later.`;\n      await new Promise(resolve => setTimeout(resolve, delays[i]));\n    }\n  }\n}","map":{"version":3,"names":["callGemini","apiKey","prompt","systemPrompt","url","payload","contents","parts","text","systemInstruction","delays","i","length","_data$candidates","_data$candidates$","_data$candidates$$con","_data$candidates$$con2","_data$candidates$$con3","response","fetch","method","headers","body","JSON","stringify","ok","status","Error","errText","data","json","candidates","content","error","message","Promise","resolve","setTimeout"],"sources":["C:/Users/MJ Adithyan/Desktop/Bava/abb-drives-pro_Bhavik/abb-drives-pro/src/utils/api.js"],"sourcesContent":["export async function callGemini(apiKey, prompt, systemPrompt = \"You are an expert ABB Drives application engineer.\") {\n    const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;\n    const payload = {\n        contents: [{ parts: [{ text: prompt }] }],\n        systemInstruction: { parts: [{ text: systemPrompt }] }\n    };\n\n    const delays = [1000, 2000, 4000, 8000, 16000];\n    for (let i = 0; i < delays.length; i++) {\n        try {\n            const response = await fetch(url, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify(payload)\n            });\n            if (!response.ok) {\n                if (response.status === 429) throw new Error(\"Too Many Requests\");\n                const errText = await response.text();\n                throw new Error(`API Error: ${response.status} - ${errText}`);\n            }\n            const data = await response.json();\n            return data.candidates?.[0]?.content?.parts?.[0]?.text || \"No analysis available.\";\n        } catch (error) {\n            if (i === delays.length - 1) return `Error: ${error.message}. Please try again later.`;\n            await new Promise(resolve => setTimeout(resolve, delays[i]));\n        }\n    }\n}\n"],"mappings":"AAAA,OAAO,eAAeA,UAAUA,CAACC,MAAM,EAAEC,MAAM,EAAEC,YAAY,GAAG,oDAAoD,EAAE;EAClH,MAAMC,GAAG,GAAG,gHAAgHH,MAAM,EAAE;EACpI,MAAMI,OAAO,GAAG;IACZC,QAAQ,EAAE,CAAC;MAAEC,KAAK,EAAE,CAAC;QAAEC,IAAI,EAAEN;MAAO,CAAC;IAAE,CAAC,CAAC;IACzCO,iBAAiB,EAAE;MAAEF,KAAK,EAAE,CAAC;QAAEC,IAAI,EAAEL;MAAa,CAAC;IAAE;EACzD,CAAC;EAED,MAAMO,MAAM,GAAG,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC;EAC9C,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,MAAM,CAACE,MAAM,EAAED,CAAC,EAAE,EAAE;IACpC,IAAI;MAAA,IAAAE,gBAAA,EAAAC,iBAAA,EAAAC,qBAAA,EAAAC,sBAAA,EAAAC,sBAAA;MACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACf,GAAG,EAAE;QAC9BgB,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACnB,OAAO;MAChC,CAAC,CAAC;MACF,IAAI,CAACa,QAAQ,CAACO,EAAE,EAAE;QACd,IAAIP,QAAQ,CAACQ,MAAM,KAAK,GAAG,EAAE,MAAM,IAAIC,KAAK,CAAC,mBAAmB,CAAC;QACjE,MAAMC,OAAO,GAAG,MAAMV,QAAQ,CAACV,IAAI,CAAC,CAAC;QACrC,MAAM,IAAImB,KAAK,CAAC,cAAcT,QAAQ,CAACQ,MAAM,MAAME,OAAO,EAAE,CAAC;MACjE;MACA,MAAMC,IAAI,GAAG,MAAMX,QAAQ,CAACY,IAAI,CAAC,CAAC;MAClC,OAAO,EAAAjB,gBAAA,GAAAgB,IAAI,CAACE,UAAU,cAAAlB,gBAAA,wBAAAC,iBAAA,GAAfD,gBAAA,CAAkB,CAAC,CAAC,cAAAC,iBAAA,wBAAAC,qBAAA,GAApBD,iBAAA,CAAsBkB,OAAO,cAAAjB,qBAAA,wBAAAC,sBAAA,GAA7BD,qBAAA,CAA+BR,KAAK,cAAAS,sBAAA,wBAAAC,sBAAA,GAApCD,sBAAA,CAAuC,CAAC,CAAC,cAAAC,sBAAA,uBAAzCA,sBAAA,CAA2CT,IAAI,KAAI,wBAAwB;IACtF,CAAC,CAAC,OAAOyB,KAAK,EAAE;MACZ,IAAItB,CAAC,KAAKD,MAAM,CAACE,MAAM,GAAG,CAAC,EAAE,OAAO,UAAUqB,KAAK,CAACC,OAAO,2BAA2B;MACtF,MAAM,IAAIC,OAAO,CAACC,OAAO,IAAIC,UAAU,CAACD,OAAO,EAAE1B,MAAM,CAACC,CAAC,CAAC,CAAC,CAAC;IAChE;EACJ;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}